# 8. 기능이동

- 지금까지(6~7장) 프로그램 요소를 생성 혹은 제거하거나 이름을 변경하는 리팩터링

- 8장 => 다른 요소를 다른 컨텍스트(클래스나 모듈 등)로 옮기는 일

  - 함수 옮기기(8.1), 필드 옮기기(8.2)

- 옮기기는 문장 단위에서도 이뤄진다

  - 문장을 함수 안이나 바깥으로 옮길 때
    - 문장을 함수로 옮기기(8.3)
    - 문장을 호출한 곳으로 옮기기(8.4)
  - 같은 함수 안에서 옮길 때
    - 문장 슬라이드하기(8.6)
  - 한 덩어리의 문장들이 기존 함수와 같은 일을 할 때
    - 인라인 코드를 함수 호출로 바꾸기(8.5) => 중복을 제거

- 반복문 관련 리팩터링

  - 반복문 쪼개기(8.7) : 반복문이 단 하나의 일만 수행하도록 보장
  - 반복문 파이프라인으로 바꾸기(8.8) : 반복문을 완전히 없애버림

- 죽은 코드 제거하기(8.9)

## 8.1 함수 옮기기

### 8.1.1 함수 옮기기 - 개요

```js
// before
class Account {
  get overdraftCharge() {...}
}

// after - 다른 클래스로 함수를 옮김
class AccountType {
  get overdraftCharge() {...}
}
```

### 8.1.2 배경

- 좋은 소프트웨어 설계의 핵심 : 모듈성(modularity) - 모듈화가 얼마나 잘 되어 있느냐를 뜻 함

  - 모듈성 : 어딘가를 수정하려 할 때 해당 기능과 깊이 관련된 작은 일부만 이해해도 가능하게 해주는 능력
  - 모듈성을 높이려면?
    - 서로 연관된 요소들을 함께 묶기
    - 요소 사이의 연결 관계를 쉽게 찾고 이해할 수 있도록 해야 함(그림 같은 것으로 정리하면 좋을 듯)
    - 이해도가 높아질수록 소프트웨어 요소들을 더 잘 묶는 새로운 방법을 깨우치게 됨
    - 높아진 이해를 반영 => 요소들을 이리저리 옮길 필요가 있음

- 컨텍스트

  - 모든 함수는 어떤 컨텍스트 안에 존재(전역도 있지만 대부분 특정 모듈에 속함)
  - 객체 지향 프로그래밍의 핵심 모듈화 : 컨텍스트 클래스
  - 함수를 다른 함수에 중첩시켜서 공통 컨텍스트를 만들음
  - 다른 클래스로 옮겨두면 사용하기 더 편한 메서드도 있다

- 함수를 옮길지 말지 정하기란 쉽지 않다

  - 현재 컨텐스트와 후보 컨텍스트 둘러보면 도움이 된다
  - 대상함수를 호출하는 함수들은 무엇인지
  - 대상함수가 호출하는 함수들은 또 무엇이 있는지
  - 대상 함수가 사용하는 데이터는 무엇인지를 살펴봐야 한다

- 서로 관련된 여러 함수를 묶을 때 - 새로운 컨텍스트
  - 여러 함수를 클래스로 묶기(6.9절)
  - 클래스 추출하기(7.5절)

### 8.1.2 함수 옮기기 - 절차
