# 4장 테스트 환경 세팅

### typescript 환경 설정

- node, npm 설치
- npm install -g typescript
- npm i -g ts-node
- npm i -g @types/node
- tsc --init

### 테스트 라이브러리 : jest

- npm install --save-dev jest

### test 환경 설정

- https://yonghyunlee.gitlab.io/temp_post/jest/

# 04. 테스트 구축하기

- 리팩터링 <- 견고한 테스트(test suite)가 뒷받침 돼야 한다
- 리팩터링을 하지 않더라도 좋은 테스트를 작성하는 일은 개발 효율을 높여준다

## 4.1 자가 테스트 코드의 가치

- 프로그래머 - 실제로 코드를 작성하는 시간의 비중은 그리 크지 않음
  - 대부분 디버깅에 시간을 많이 쓰는데 특히 버그를 찾는 시간이 오래 걸림

**모든 테스트를 완전히 자동화하고 그 결과까지 스스로 검사하게 만들자.**

**테스트 스위트는 강력한 버그 검출 도구로, 버그를 찾는 데 걸리는 시간을 대폭 줄여준다.**

- 테스트를 자동화한다면 테스트 코드를 작성하는 재미가 꽤 쏠쏠하다

- 테스트를 작성하기 가장 좋은 시점은 프로그래밍을 시작하기 전이다.

- 기능을 추가해야할 때 테스트부터 작성한다
- 테스트를 작성하다보면 원하는 기능을 추가하기 위해 무엇이 필요한지 고민하게 된다.
- 구현보다 인터페이스에 집중하게 된다는 장점도 있다(무조건 좋은 일이다)
- 코딩이 완료되는 시점을 정확하게 판단할 수 있다

  - 테스트를 모두 통과한 시점 : 코드를 완성한 시점

- 켄트 벡 - 테스트부터 작성하는 습관 : 테스트 주도 개발(Test-Driven Development : TDD)
  - (처음엔 통과하지 못할) 테스트를 작성하고
  - 이 테스트를 통과하게끔 코드를 작성하고
  - 결과 코드를 최대한 깔금하게 리팩터링하는 과정
  - 이 과정을 짧은 주기로 반복한다
- 테스트 -> 코딩 -> 리팩터링

  - 한 시간에도 여러 차례 진행

- 테스트 코드 : 적은 노력으로 엄청난 효과

- 테스트가 갖춰지지 않은 코드를 리팩터링해야 할 때 => 리팩터링보다 자가 테스트 코드 부터 작성

## 4.2 테스트할 샘플 코드

- 사용자가 생산 계획을 검토하고 수정하도록 해주는 간단한 애플리케이션의 일부
  - 생산 계획 : { 각 지역의 수요, 가격 }
  - 지역에 위치한 생산자 : 각기 제품을 특정 가격으로 특정 수량만큼 생산할 수 있음
  - UI는 생산자별로 제품을 모두 판매했을 때 얻는 수익도 보여줌
  - 화면 맨아래 - (수요 - 총샌산량 : 생산 부족분), 현재 계획에서 거둘 수 있는 총수익
- 이번 장에선 비지니스 로직을 바탕으로 테스트 코드 작성하는 방법에 집중
- 비지니스 로직 -> 클래스 두 개 : 생산자(Producer), 지역 전체(Province)
  - Province의 생성자 : JSON문서로 부터 만들어진 Javascript 객체를 인수로 받음
