# 10 조건부 로직

- 프로그램의 힘을 강화하는데 크게 기여하지만 복잡하게 만든 주요 원흉
- 복잡한 조건문 => 조건문 분해하기
- 논리적 조합을 명확하게 다듬는 데는 중복 조건식 통합하기
- switch 조건부 로직 당형성으로 바꾸기
- null 특이 케이스 추가하기
- 어서션 추가하기

## 10-1 조건문분해하기
 ### 배경 
- 프로그램의 힘을 강화하는데 크게 기여하지만 복잡하게 만든 주요 원흉
- 직설적이지가 않다.
- 코드가 클수록 블록을 만들어서 함수 호출로 바꾸면 전체적인 의도가 더 확실히 드러낸다.
- 조건문이 보이면 각 조건절에 이 작업이 중요하다.

### 절차
 1) 조건식과 그 조건식에 딸린 조건절 각각을 함수로 추출한다.

## 10-2 조건식 통합하기
 ### 배경 
- 비교한느 조건은 다르지만 그 결과로 수행하는 동작은 똑같은 코드들이 더러 있따
- 어차피 같은일을 할꺼면 하나로 통한하는게 낫다.
- 여러 조각을 합쳐서 내가 하련는 일이 더 명확해진다.
- 이 작업이 함수 추추랗기 까지 이어질수잇다.
- 왜를 말해주는 코드가 효과적이다
- 독립적이라고 느끼면 하면안된다.
### 절차
 1) 해당 조건식들 모두에 부수효과가 없는지 확인한ㄷ(질의함수, 변경 함수 분리 하기 먼저 적용)
 2) 조건문 두 개를 선택하여 두 조건문의 조건식들을 논리 연산자로 결합한다.
    - 순차적으로 이루어지는 조건문은 or로 결합하고, 중첩된 조건문은 and로 결합한다.
 3) 테스트한다.
 4) 조건이 하나만 남을 때까지 과정을 반복
 5) 하나로 합ㅁ쳐진 조건식을 함수로 추출할지 고려해본다.

## 10-3 중첩 조건문을 보호 구문으로 바꾸기
### 배경
- 조건문은 두 가지 형태로 쓰인다. 참인 경로ㅡ 거짓 경로 모두 정상 동작 or 한쪽만 정상 형태
- if else 절을 사용 한쪽만 정상이라면 비정상 조건을  if에서 검사함다음 참이면 빠져 나온다
### 절차
 1) 교체해야 할 조건 중 가장 바깥 것을 선택하여 보호 구문으로 나온다
 2) 테스트한다
 3) 1~2 과정을 필요한 만큼 반복한다
 4) 모든 보호 구문이 같은 결과를 반환한다면 보호 구문들의 조건식을 통합한다.

## 10-4 조건식 로직을 다형성으로 바꾸기
## 배경 
 - 조건부 로직: 구조화 방법고민
 - case 별로 클래스를 하나씩만들어 스위치 중복 로직을없앤다
 - 다르녜로 case 문과 그 변형 동작으로 구성된 로직을 떠올릴수 있다.
 - case 에따른 서브 클래스를 만든다.
               
### 절차 
 1) 다형적 동작을 표현하는 클래스들이 아직 없다면 만들어준다. 이왕이면 적합한 인스턴스를 알아서 만들어 반환하는 팩터리 함수도 함께 만든다.
 2) 호틀하는 코드에서 팩터리 함수를 사용하게한다
 3) 조건부 로직 함수를 슈퍼클래스로 옮긴다
 4) 서브 클래스 중 하나를 선택한다. 조건부 로직 메서드를 오버라이드하고, 슈퍼클래스에 해당하는 조건절을서브클래스 메서드로 복사한 다음 적절히 수정한다
 5) 같은 방식으로 각 조건절을 해당 서브 클래스에서 메서드로 구현한다.
 6) 슈퍼클래스 메서드에서는 기본 동작 부분만 남긴다. 혹은 슈퍼클래스가 추상클래스여야한다면, 이 메서드를 추상으로 선언하거나 서브클래스 처리해야함을 알리는 에러를 던진다.

## 10-5 특이 케이스 추가하기

---

## 10-6 어서션 추가하기
~~~javascript
  if (this.discountRate)
	base = base - (this.discountRate * base);
~~~
###                 
~~~javascript
console.assert(this.discountRate > 0);
if (this.discountRate)
	base = base - (this.discountRate * base);
~~~
### 배경
- 특정 조건일때 참인 동작인 코드가 존재함
- 제곱근계산입력이 양수일때만 정상 동작한다.
- 어서션(항상 참이라는 가정 조건부 문장, 프로그래머가 잘못햇다는 뜻, 시스템에 영향을 주면안된다.)
### 절차
- 참이라고 가정하는 조건이 보이면 그 조건을 명시하는 어서션을 추가한다.

---

### 10-7 제어플래그를 탈출문으로 바꾸기

~~~javascript
   for (const p of people) {
	if (!found) {
		if (p === '조커') {
			sendAlert();
			found = true;
		}
	}
}
~~~

~~~javascript
 for (const p of people) {
	if (p === '조커') {
	    sendAlert();
		break;
	}
}
~~~

### 배경

- 제어 플래그란 코드의 동작을 변경하는 데 사용하는 변수, 악취다.
- break, continue,
- return 문을 하나로 유지하는 사람이 심기도한다.

### 절차

- 제어 플래그를 사용하는 코드를 함수로 추출할지 고려한다
- 제어플래글르 갱신하는 코드 각각을 적절한 제어문으로 바꾼다. 하나 바꿀때마다 테스트한다. return break continue
- 모두 수정했다면 제어플래그를 제거한다