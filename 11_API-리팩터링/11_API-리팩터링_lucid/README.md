# API 리펙토링

## Intro
- 좋은 API 를 개선하는 방법을 새로 깨달을 때마다 그에 맞게 리팩터링 해야한다.
- 섞여있을경우 질의함수와 변경함수 분리하기를 적용해 갈라놔야된다
- 어떤 매개변수는 그저 함수의 동작모드를 전환하는 용도로만쓰일때 => 플래그 인수 제거하기
- 필요이상으로 분해될때 객체 통째로넘기기

## 11.1 질의 함수와 변경 함수 분리하기

### 배경
- 우리는 외부에서 관찰할 수 있는 겉보기 부수효과가 전혀없이 반환해주는 함수를 추구해야 한다
- side Effect 를 만들지말자
### 절차
1) 대상 함수를 복제하고 질의 목적에 충실한 이름을 짓는다.
2) 새 질의 함수에서 부수효과를 모두 제거한다.
3) 정적검사를 수행한다
4) 원래 함수를 호출하는곳을 모두 찾아낸다. 질의 함수를 호출하는 코드를 바로 아래줄에 새로 추가, 하나 수정할때마다 테스트한다.
5) 원래 함수에서 즬이 관련 코드를 제거한다.
6) 테스트한다.
                 
## 11.2 함수 매개변수화하기
- 두 함수의 로직이 아주 비슷하고 단지 리터럴 값만 다르다면, 그 다른 값만 매개변수로 처리로 중복없앨수 있다.

### 절차
1) 비슷한 함수 중 하나를 선택한다
2) 함수 선언 바꾸기로 리터럴들을 매개변수로 추가한다.
3) 이 함수를 호출하느 곳 모두에 적절한 리터럴 값을 추가한다.
4) 테스트한다.
5) 매개변수로 받은 갑승ㄹ 사용하도록 함수 본문을 수정한다. 하나 수정할때마다 테스트한다.
6) 비슷한 다른 함수호출 코드를 찾아 매개변수화된 함수를 호출하도록 하나씩 수정한다. 하나 수정할때마다 테스트한다.
