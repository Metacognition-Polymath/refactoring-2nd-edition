# 03. 코드에서 나는 악취

"냄새 나면 당장 갈아라." - 켄트 벡 할머니의 육아 원칙

'적용 방법'을 아는 것과 '제때 적용'할 줄 아는 것은 다르다.

리팩터링하면 해결할 수 있는 문제의 징후를 제시

이번 장(또는 부록 B)을 읽고 코드가 풍기는 냄새(악취)가 무엇인지 찾자

그런 다음 해법으로 제시한 리팩터링 기법을 이 책의 6~12장에서 찾아 읽고 그 냄새를 없애는데 도움이 될지 생각해본다

#### 느낀점

- 각 기법마다 예시 코드를 하나씩 봐야겠다.
  - 함수 추출하기 -> 6.1절을 봐서 코드를 직접 보기

## 3.1 기이한 이름(Mysterious Name)

- 함수, 모듈, 변수, 클래스 등은 그 이름만 보고도 각각이 무슨 일을 하고 어떻게 사용해야 하는지 명확히 알 수 있도록 엄청나게 신경써서 이름을 지어야 한다.
- 마땅한 이름이 떠오르지 않는다면 설계에 더 근본적인 문제가 숨어 있을 가능성이 높다
- 혼란스러운 이름을 잘 정리하다 보면 코드가 훨씬 간결해질 때가 많다
- e.g., 함수 선언 바꾸기(6.5절), 변수 이름 바꾸기(6.7절), 필드 이름 바꾸기(9.2절)

## 3.2 중복 코드(Duplicated Code)

- 똑같은 코드 구조가 여러 곳에서 반복된다면 하나로 통합하여 더 나은 프로그램을 만들 수 있다
- e.g., 함수 추출하기(6.1절), 문장 슬라이드 하기(8.6절), 메서드 올리기(12.1절)

## 3.3 긴 함수(Long Function)

- 코드를 이해하고, 공유하고, 선택하기 쉬워진다는 장점은 함수를 짧게 구성할 때 나오는 것이다.
- 함수 이름을 잘 지어두면 본문 코드를 볼 이유가 사라진다
- 주석을 달만한 부분은 무조건 함수로 만든다
- 함수이름은 동작 방식이 아닌 '의도'가 드러나게 짓는다
- 함수로 묶는 코드는 여러 줄 일 수도 있고 단 한 줄일 수도 있다
- 함수를 짧게 만드는 작업의 99%는 `함수 추출하기`(6.1절)가 차지 한다.
- 매개 변수와 임시 변수를 많이 사용한다면
  - `임시 변수를 질의 함수로 바꾸기`(7.4절)
  - `매개변수 객체 만들기`(6.8절)
  - `객체 통째로 넘기기`(11.9절)

#### 추출할 코드 덩어리

- 추출할 코드 덩어리 -> 주석을 참고 -> 주석은 코드만으로는 목적을 이해하기 어려운 부분에 달려있는 경우가 많다
  - 함수 이름을 주석 내용을 토대로 짓는다
  - 코드가 단 한줄이어도 따로 설명할 필요가 있다면 함수로 추출하는 게 좋다

#### 조건문이나 반복문

- 조건문 : `조건문 분해하기`(10.1절)
- 거대한 switch문 : case문 마다 `함수 추출하기`(6.1절)
  - 각 case의 본문을 함수 호출문 하나로 바꾼다
- 같은 조건을 기준으로 나뉘는 switch문이 여러개라면 `조건문을 다형성으로 바꾸기`(10.4절)
- 반복문도 그 안의 코드와 함께 추출해서 독립된 함수로 만든다.
- 추출한 반복문 코드에 적합한 이름이 떠오르지 않는다면 -> 성격이 다른 두 가지 작업이 섞여 있기 때문일 수 있다
  - `반복문 쪼개기`(8.7절)
